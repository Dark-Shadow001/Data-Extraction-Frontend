<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="UTF-8" />
        <meta http-equiv="X-UA-Compatible" content="IE=edge" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <title>Reset Password</title>
    </head>
    <body>
        <div style="text-align: center; font-size: 20px; color: Blue">
            <span>Please fill the below form to reset your password.</span
            ><br />
            <input
                type="text"
                name="password"
                id="password"
                placeholder="Enter new password.."
            />
            <button onclick="resetPassword()">Reset</button>
        </div>
        <br /><br />
        <div style="text-align: center; font-size: 15px; color: Blue">
            <span id="message"></span>
        </div>
        <div style="text-align: center; font-size: 12px; color: grey">
            <br /><br />
            <img
                src="https://files-campaignkart.s3.ap-south-1.amazonaws.com/logo/campaignkart_com.png"
                width="200px"
            /><br /><br />
            This is an auto generated email. Please do not reply.<br />This
            email was sent by <br />
            Campaign Kart.<br /><br />
            If you don't want to receive this type of email in the future,
            please
            <a
                href="https://campaignKart/unsubscribe/d89sd89sd8sdsdds988sd9sdf9"
                target="_blank"
                >unsubscribe</a
            >.
        </div>
        <script data-username="{{ username }}">
            const data = document.currentScript.dataset;
            const resetPassword = () => {
                const password = document.getElementById("password").value;
                const requestOptions = {
                    method: "POST",
                    headers: new Headers({
                        "Content-Type": "application/json",
                    }),
                    body: JSON.stringify({
                        password,
                        username: data.username,
                    }),
                };
                fetch(data.BASE_URL + "/resetpassword", requestOptions)
                    .then((response) => {
                        document.getElementById("message").innerHTML =
                            "Your password has changed successfully.";
                    })
                    .catch((error) => {
                        document.getElementById("message").innerHTML =
                            "Error in resetting password.";
                        console.log(error);
                    });
            };
        </script>
    </body>
</html>
